<?xml version="1.0" encoding="windows-1251" standalone="yes" ?>
<triggers>

<!-- Ќачальный ролик. -->
	<trigger Name="StartRolikGame" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			CinemaFiltersUse()

			SaveAllToleranceStatus(RS_NEUTRAL)

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="ROLIK15" active="0">
		<event flypath="start_rolik5" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("fatherDw"):SetNodeAction(AT_RESERVED1) 
			getObj("fatherDw"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 
			getObj("hero1Dw"):SetNodeAction(AT_STAND2)
			getObj("hero1Dw"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 31, 0.25)

			trigger:Deactivate()    
		</script>
	</trigger>
	<trigger Name="ROLIK16" active="0">
		<event flypath="start_rolik6" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
 		<script>
			getObj("hero1Dw"):SetNodeAction(AT_RESERVED1)
			getObj("hero1Dw"):SetNextForAnimation(AT_RESERVED1, AT_STAND1)
 			getObj("fatherDw"):SetNodeAction(AT_STAND2) 
			getObj("fatherDw"):SetNextForAnimation(AT_STAND2, AT_STAND1)

			AddCinematicMessage( 4, 1 )
			AddCinematicMessage( 41, 0.1)

			trigger:Deactivate()    
		</script>
	</trigger>
	<trigger Name="ROLIK12" active="0">
		<event flypath="start_rolik2" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("fatherDw"):SetNodeAction(AT_RESERVED1) 
			getObj("fatherDw"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 

			CreateNewDummyObject( "dweller_player", "hero2Dw", -1, -1, CVector(3352.5, 367.858, 3306.266), Quaternion(0.0000, 0.8930, 0.0000, -0.4501), 0)

			local rrr = GetEntityByName ("hero1Dw")
			if rrr then rrr:Remove() end

			AddCinematicMessage( 5, 0.25  )

			trigger:Deactivate()    
		</script>
	</trigger>
	<trigger Name="ROLIK13" active="0">
		<event flypath="start_rolik3" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("hero2Dw"):SetNodeAction(AT_RESERVED1)
			getObj("hero2Dw"):SetNextForAnimation(AT_RESERVED1, AT_STAND1)
 			getObj("fatherDw"):SetNodeAction(AT_STAND2) 
			getObj("fatherDw"):SetNextForAnimation(AT_STAND2, AT_STAND1)

			AddCinematicMessage( 6, 0.25  )

			trigger:Deactivate()    
		</script>
	</trigger>
	<trigger Name="ROLIK18" active="0">
		<event flypath="start_rolik8" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("fatherDw"):SetNodeAction(AT_RESERVED1) 
			getObj("fatherDw"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 
			getObj("hero2Dw"):SetNodeAction(AT_STAND2)
			getObj("hero2Dw"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 7, 0.25  )

			trigger:Deactivate()    
		</script>
	</trigger>
	<trigger Name="ROLIK14" active="0">
		<event flypath="start_rolik4" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			local rrr = GetEntityByName ("hero2Dw")
			if rrr then rrr:Remove() end

			local rrr = GetEntityByName ("fatherDw")
			if rrr then rrr:Remove() end

			AddCinematicMessage( 8, 0.25  ) 

			local Plf = GetPlayerVehicle()
			Plf:SetCustomControlEnabled( true )
			Plf:SetExternalPathByName("start_rolik_mycar")
			Plf:SetCustomControlEnabled( false )

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="Finish00" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			local rrr = GetEntityByName ("hero1Dw")
			if rrr then rrr:Remove() end
			
			local rrr = GetEntityByName ("hero2Dw")
			if rrr then rrr:Remove() end

			local rrr = GetEntityByName ("fatherDw")
			if rrr then rrr:Remove() end

			TDeactivate( "ROLIK11" )
			TDeactivate( "ROLIK15" )
			TDeactivate( "ROLIK16" )
			TDeactivate( "ROLIK17" )
			TDeactivate( "ROLIK12" )
			TDeactivate( "ROLIK13" )
			TDeactivate( "ROLIK18" )
			TDeactivate( "ROLIK14" )

			local Plf = GetPlayerVehicle()
			Plf:SetExternalPathByName("start_rolik_mycar")
			Plf:PlaceToEndOfPath()
			Plf:SetRotation(Quaternion(-0.007, 1.000, -0.010, 0.021))

			TActivate ("tr_Tutotial_Start")

			StopPlayingCustomMusic()

			SetCameraBehindPlayerVehicle()
			
			local Workshop = GetEntityByName("TheTown_Workshop")
			local Repository = Workshop:GetRepositoryByTypename("CabinsAndBaskets")
			Repository:AddItems("belazCab01", 2)
			Repository:AddItems("belazCab02", 1)
			Repository:AddItems("belazCab03", 2)
			Repository:AddItems("belazCab04", 2)
			Repository:AddItems("belazCab05", 1)
			trigger:Deactivate() 
		</script>
	</trigger>





<!-- первый бандит -->
	<trigger Name="ZASADA_1" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="GameLoc_1" />
		<script>
			CinemaFiltersUse()

			SaveAllToleranceStatus(RS_NEUTRAL)

			PlayCustomMusic("Battle02")

			Fly("cam01", CINEMATIC_NO_AIM, 0, 5, 1, 1 )
			StartCinematic()

			TActivate("trZasada1_StopPl")
			TActivate("trZasada1_end")
			TActivate("trZasada1_cam01")

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger	Name="trZasada1_cam01"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			CreateVehicleEx("Sml101","FirstB_0",CVector(2888.161, 346.333, 2342.007), 1002)

			local FVehicle = GetEntityByName("FirstB_0")
			if FVehicle then
				FVehicle:setGodMode( 1 )
				FVehicle:SetRandomSkin()
				FVehicle:SetRotation(Quaternion(0.021, 0.472, 0.040, 0.880))
				FVehicle:SetThrottle( 1 )
				FVehicle:SetCustomLinearVelocity( 25 )
				FVehicle:SetExternalPathByName("fun1_5road")
			end

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trZasada1_StopPl" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()

			Plf:SetCustomControlEnabled( true )
			Plf:SetCustomLinearVelocity( 0 )
			Plf:SetThrottle( 0 )
			Plf:SetCustomControlEnabled( false )

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trZasada1_end" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			local FVehicle = GetEntityByName("FirstB_0")
			if FVehicle then
				skin = FVehicle:GetSkin()
				FVehicle:Remove()
			end

			TeamCreate("FirstB",1002,CVector(2957.974, 333.446, 2394.033),{"Sml101"})
			local terr = GetEntityByName("FirstB_vehicle_0")
			if terr then
				terr:SetSkin ( skin )
				SetCameraDirectionToObj(terr:GetId())
			end

			skin = nil

			TDeactivate( "trZasada1_cam01" )
			TDeactivate( "trZasada1_StopPl" )

			TActivate("trFirstDie")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="trFirstDie"		active="0">
		<event	eventid="GE_OBJECT_DIE"	ObjName="FirstB" />
		<script>
			StopPlayingCustomMusic()

			trigger:Deactivate()
		</script>
	</trigger>





<!-- Lisa встреча в городе -->
	<trigger Name="loc_lisa" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="LisaRolik_loc" />
		<script>
			if GetPlayerMoney() >= 15000 and not(IsQuestComplete("TalkWithFather_Quest")) then
			AddPlayerMoney(-3999999)
			AddPlayerMoney(200)
			end
			RuleConsole("cinematic_spring_coeff 1.7")

			SaveAllToleranceStatus(RS_NEUTRAL)

			PlayCustomMusic("Passage01unloop")

			TeamCreate("CARLISA",1042,CVector(1336.626, 287.900, 2837.503),{"LisaCar"})
			local PlVehicle = GetPlayerVehicle()
			local LisaID = GetEntityByName("CARLISA_vehicle_0"):GetId()
			if PlVehicle then
				PlVehicle:SetThrottle( 0 )
			end
			local idn01 = GetPlayerVehicleId()

			Fly("lisa_cam01", CINEMATIC_NO_AIM, 0, 3, 1, 0 )
			FlyLinked( "lisa_cam02", idn01, 8, 0, 0, LisaID )
			Fly("lisa_cam04", CINEMATIC_NO_AIM, 0, 3, 0, 1 )
			StartCinematic()

			TActivate("RolikBegin_Lisa")
			TActivate("RolikEnd_Lisa")
			TActivate("trLisa_npc")
			TActivate("RolikLisaCam3")
			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="RolikBegin_Lisa" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			CinemaFiltersUse()

			local PlVehicle = GetPlayerVehicle()
			if PlVehicle then
				PlVehicle:SetGamePositionOnGround( CVector(1245.248, 291.696, 2853.315) )
				PlVehicle:SetRotation(Quaternion(0.070, 0.539, 0.000, -0.839))
				PlVehicle:SetCustomControlEnabled( true )
				PlVehicle:SetExternalPathByName("player_path01")
				PlVehicle:SetCustomControlEnabled( false )
				PlVehicle:SetThrottle( 1 )
				PlVehicle:SetCustomLinearVelocity( 5 )
			end

			local vehLisa = GetEntityByName("CARLISA_vehicle_0")
			if vehLisa then
				vehLisa:SetGamePositionOnGround( CVector(1273.391, 288.236, 2848.792))
				vehLisa:setImmortalMode(1)
				vehLisa:SetRotation(Quaternion(-0.001, -0.611, 0.001, 0.792))
				vehLisa:SetSkin(2)
				vehLisa:SetCustomControlEnabled( true )
				vehLisa:SetCustomLinearVelocity( 30 )
				vehLisa:SetThrottle( 1 )
				vehLisa:SetExternalPathByName("lisa_path01")
				vehLisa:SetCustomControlEnabled( false )
			end

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="RolikLisaCam3" active="0">
		<event flypath="lisa_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			CreateNewDummyObject( "dweller_player", "hero1Dw", -1, -1, CVector(1190.837, 303.428, 2941.185), Quaternion(-0.022, 0.281, 0.039, 0.959), 0)
			CreateNewDummyObject( "dweller_lisa", "lisadw", -1, -1, CVector(1193.323, 303.793, 2946.443), Quaternion(-0.071, 0.966, -0.021, -0.247), 2)
			local PlVehicle = GetPlayerVehicle()
			local vehLisa = GetEntityByName("CARLISA_vehicle_0")
			if PlVehicle then
				PlVehicle:PlaceToEndOfPath("player_path01")
				PlVehicle:SetThrottle( 0 )
			end
			if vehLisa then
			vehLisa:PlaceToEndOfPath("lisa_path01")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Lisa" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			StartConversation( "Lisa" )

			local PlVehicle = GetPlayerVehicle()
			if PlVehicle then
				PlVehicle:PlaceToEndOfPath()
				PlVehicle:SetThrottle( 0 )
				PlVehicle:SetCustomControlEnabled( false )
			end

			TDeactivate( "RolikBegin_Lisa" )
			TDeactivate( "loc_lisa" )
			TDeactivate( "RolikLisaCam3" )
			if getObj("hero1Dw") then
			getObj("hero1Dw"):Remove()
			end
			if getObj("lisadw") then
			getObj("lisadw"):Remove()
			end
			local vehLisa = GetEntityByName("CARLISA_vehicle_0")
			if vehLisa then
				vehLisa:PlaceToEndOfPath()
			end

			RuleConsole("cinematic_spring_coeff 0.7")

			StopPlayingCustomMusic()

			SetCameraBehindPlayerVehicle()


			trigger:Deactivate()
		</script>
	</trigger>





<!-- Lisa 1 деревн€ -->
	<trigger Name="RolikBegin_LISA1" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)

--			RuleConsole("cinematic_spring_coeff 1.3")

			local PlVehicle = GetPlayerVehicle()
			if PlVehicle then
				PlVehicle:SetThrottle( 0 )
			end

			local idn01 = GetPlayerVehicleId()

			Fly("lisa1_cam01", CINEMATIC_NO_AIM, 0, 4, 1, 0 )
			Fly("lisa1_cam02", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
			Fly("lisa1_cam03", CINEMATIC_NO_AIM, 0, 6, 0, 1 )
			StartCinematic()

			TActivate("RolikEnd_Lisa1")
			TActivate("trLisa1_cam02")
			TActivate("trLisa1_cam03")
			TActivate("trLisa1")

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trLisa1" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			CinemaFiltersUse()

			local vehLisa
			local FVehicle = GetEntityByName("CARLISA_vehicle_0")
			if FVehicle then
				FVehicle:SetGamePositionOnGround( CVector(3924.175, 233.725, 200.033) )
				vehLisa = CreateVehicleEx("LisaCar","vehLisa_0",(CVector(1973.089, 301.500, 822.093)), 1042)
				vehLisa:SetSkin(2)
			end

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetCustomControlEnabled( true )
				Plf:SetGamePositionOnGround( CVector(1929.123, 300.833, 848.498) )
				Plf:SetRotation(Quaternion(-0.000, -0.684, -0.008, -0.729))
				Plf:SetExternalPathByName("player_path02")
				Plf:SetCustomControlEnabled( false )
				Plf:SetThrottle( 1 )
				Plf:SetCustomLinearVelocity( 10 )
			end

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trLisa1_cam02" active="0">
		<event flypath="lisa1_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 1111, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLisa1_cam03" active="0">
		<event flypath="lisa1_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 1112, 2 )

			local vehLisa = GetEntityByName("vehLisa_0")
			if vehLisa then
				vehLisa:SetExternalPathByName("lisa_path021")
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Lisa1" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			local FVehicle = GetEntityByName("CARLISA_vehicle_0")
			FVehicle:SetGamePositionOnGround( CVector(1972.611, 303.334, 756.614) )

			local vehLisa = GetEntityByName("vehLisa_0")
			if vehLisa then
				vehLisa:Remove()
			end

			TDeactivate( "trLisa1" )
			TDeactivate( "trLisa1_cam03" )
			TDeactivate( "trLisa1_cam02" )

			local Plf = GetPlayerVehicle()
			Plf:PlaceToEndOfPath()

--			RuleConsole("cinematic_spring_coeff 0.7")

			SetCameraBehindPlayerVehicle()


			trigger:Deactivate()
		</script>
	</trigger>





<!-- lisa 2 деревн€ -->
	<trigger Name="RolikBegin_LISA2" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)

			local PlVehicle = GetPlayerVehicle()

			if PlVehicle then
				PlVehicle:SetThrottle( 0 )
			end

			Fly("lisa2_cam01", CINEMATIC_NO_AIM, 0, 4, 1, 0 )
			Fly("lisa2_cam02", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
			Fly("lisa2_cam03", CINEMATIC_NO_AIM, 0, 6, 0, 1 )
			StartCinematic()

			TActivate("RolikEnd_Lisa2")
			TActivate("trLisa2_cam02")
			TActivate("trLisa2_cam03")
			TActivate("trLisa2")

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trLisa2" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			CinemaFiltersUse()

			local vehLisa
			local FVehicle = GetEntityByName("CARLISA_vehicle_0")
			if FVehicle then
				FVehicle:SetGamePositionOnGround( CVector(3924.175, 233.725, 200.033) )
				vehLisa = CreateVehicleEx("LisaCar","vehLisa_0",( CVector(3054.574, 317.000, 413.382) ), 1042)
				vehLisa:SetSkin(2)
				vehLisa:SetExternalPathByName("lisa_path03")
			end

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetCustomControlEnabled( true )
				Plf:SetGamePositionOnGround( CVector(3074.432, 317.903, 431.046) )
				Plf:SetRotation(Quaternion(-0.010, -0.517, -0.021, -0.855))
				Plf:SetExternalPathByName("player_path03")
				Plf:SetCustomControlEnabled( false )
				Plf:SetThrottle( 1 )
				Plf:SetCustomLinearVelocity( 10 )
			end

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trLisa2_cam02" active="0">
		<event flypath="lisa2_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 1111, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLisa2_cam03" active="0">
		<event flypath="lisa2_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 1112, 2 )

			local vehLisa = GetEntityByName("vehLisa_0")
			if vehLisa then
				vehLisa:SetExternalPathByName("lisa_path031")
				vehLisa:SetRotation(Quaternion(0.013, -0.434, -0.039, 0.900))
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Lisa2" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			local vehLisa = GetEntityByName("vehLisa_0")
			local FVehicle = GetEntityByName("CARLISA_vehicle_0")
			if FVehicle then
				FVehicle:SetGamePositionOnGround( CVector(3048.641, 315.692, 465.226) )
				vehLisa:Remove()
			end

			TDeactivate( "trLisa2_cam02" )
			TDeactivate( "trLisa2_cam03" )
			TDeactivate( "trLisa2" )

			local Plf = GetPlayerVehicle()
			Plf:PlaceToEndOfPath()

			SetCameraBehindPlayerVehicle()


			trigger:Deactivate()
		</script>
	</trigger>





<!-- Lisa 3 деревн€ -->
	<trigger Name="RolikBegin_Lisa3" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			PlayCustomMusic("IntenseDialogue02")

			SaveAllToleranceStatus(RS_NEUTRAL)

			Fly("lisa3_cam01", CINEMATIC_NO_AIM, 0, 7, 1, 0 )
			Fly("lisa3_cam02", CINEMATIC_NO_AIM, 0, 8, 0, 0 )
			StartCinematic()

			TActivate( "trLisa3" )
			TActivate( "trMsg01" )
			TActivate( "trLisa3_cam02" )
			TActivate( "RolikEnd_Lisa3" )

			trigger:Deactivate()  
		</script>
	</trigger>

	<trigger Name="trLisa3" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			CinemaFiltersUse()

			local vehLisa
			local FVehicle = GetEntityByName("CARLISA_vehicle_0")
			if FVehicle then
				FVehicle:SetGamePositionOnGround( CVector(3924.175, 233.725, 200.033) )
				vehLisa = CreateVehicleEx("LisaCar","vehLisa_0",( CVector(3180.535, 319.867, 1143.735) ), 1042)
				vehLisa:SetSkin(2)
				vehLisa:SetRotation(Quaternion(-0.087, -0.005, 0.000, 0.996))
			end

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetGamePositionOnGround( CVector(3171.801, 320.361, 1170.574) )
				Plf:SetRotation(Quaternion(0.007, -0.139, -0.004, -0.990))
				Plf:SetCustomControlEnabled( true )
				Plf:SetExternalPathByName("player_path04")
				vehLisa:SetExternalPathByName("lisa_path04")
				Plf:SetCustomControlEnabled( false )
				Plf:SetThrottle( 1 )
				Plf:SetCustomLinearVelocity( 10 )
			end

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trMsg01" active="0">
	<event msgid="1121" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND2)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLisa3_cam02" active="0">
		<event flypath="lisa3_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			local vehLisa = GetEntityByName("vehLisa_0")
			local Plf = GetPlayerVehicle()
			Plf:PlaceToEndOfPath()
			vehLisa:PlaceToEndOfPath()

			CreateNewDummyObject( "dweller_player", "humPlayer", -1, -1, CVector(3180.961, 320.088, 1233.924), Quaternion(0.000, -0.982, 0.000, -0.191), 0)
			CreateNewDummyObject( "dweller_lisa", "humLisa", -1, -1, CVector(3181.123, 320.044, 1232.349), Quaternion(0.000, 0.000, 0.0000, 1.000), 0)

			AddCinematicMessage( 1121, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Lisa3" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			TDeactivate( "trMsg01" )
			TDeactivate( "trMsg02" )
			TDeactivate( "trMsg03" )
			TDeactivate( "trMsg04" )
			TDeactivate( "trMsg05" )
			TDeactivate( "trLisa3" )
			TDeactivate( "trLisa3_cam02" )

			TActivate("METALFELIX")
			StartConversation( "Hero" )

			trigger:Deactivate()
		</script>
	</trigger>
	
<!-- Lisa 3 деревн€ игрок выбрал первый вариант -->
<trigger Name="RolikBegin_Lisa31" active="0">
	<event timeout="0.01" eventid="GE_TIME_PERIOD" />
	<script>
		PlayCustomMusic("IntenseDialogue02")

		SaveAllToleranceStatus(RS_NEUTRAL)

		Fly("lisa3_cam02", CINEMATIC_NO_AIM, 0, 20, 0, 1 )
		StartCinematic()

		TActivate( "trLisa31" )
		TActivate( "trLisa3_cam021" )
		TActivate( "RolikEnd_Lisa31" )
		TActivate( "trMsg021" )
		TActivate( "trMsg031" )
		TActivate( "trMsg041" )

		trigger:Deactivate()  
	</script>
</trigger>

<trigger Name="trMsg021" active="0">
	<event msgid="1122" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("humLisa"):SetNodeAction(AT_STAND1)
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trMsg031" active="0">
	<event msgid="1123" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("humLisa"):SetNodeAction(AT_STAND2)
			getObj("humPlayer"):SetNodeAction(AT_STAND1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trMsg041" active="0">
	<event msgid="1124" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
			getObj("humLisa"):SetNodeAction(AT_STAND1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLisa3_cam021" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			local vehLisa = GetEntityByName("vehLisa_0")
			local Plf = GetPlayerVehicle()
			Plf:PlaceToEndOfPath()
			vehLisa:PlaceToEndOfPath()

			AddCinematicMessage( 11222, 0.25 )
			AddCinematicMessage( 11223, 0.25 )
	
			trigger:Deactivate()
		</script>
	</trigger>
	
	<trigger Name="RolikEnd_Lisa31" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()
	
			RestoreAllToleranceStatus()
	
			TDeactivate( "trMsg01" )
			TDeactivate( "trMsg02" )
			TDeactivate( "trMsg03" )
			TDeactivate( "trMsg04" )
			TDeactivate( "trMsg05" )
			TDeactivate( "trLisa3" )
			TDeactivate( "trLisa3_cam02" )
			TDeactivate( "trLisa3_cam021" )
			TDeactivate( "trLisa3_cam03" )
			TDeactivate( "trLisa3_cam04" )
			TDeactivate( "trLisa_Out" )
	
			TActivate("METALFELIX")
			TActivate("LISAREMOVE2")
			TActivate("LisaEnemy")
	
			local humLisa = GetEntityByName("humLisa")
			local humPlayer = GetEntityByName("humPlayer")
	
			if humPlayer then humPlayer:Remove() end
			if humLisa then humLisa:Remove() end
	
			local Plf = GetPlayerVehicle()
			Plf:PlaceToEndOfPath()
	
			StopPlayingCustomMusic()
	
			SetCameraBehindPlayerVehicle()
	
	
			trigger:Deactivate()
		</script>
	</trigger>
	
	<!-- Lisa 3 деревн€ игрок выбрал второй вариант -->
		<trigger Name="RolikBegin_Lisa32" active="0">
			<event timeout="0.01" eventid="GE_TIME_PERIOD" />
			<script>
				PlayCustomMusic("IntenseDialogue02")
	
				SaveAllToleranceStatus(RS_NEUTRAL)
	
				Fly("lisa3_cam02", CINEMATIC_NO_AIM, 0, 25, 0, 0 )
				Fly("lisa3_cam021", CINEMATIC_NO_AIM, 0, 12, 0, 0 )
				Fly("lisa3_cam03", CINEMATIC_NO_AIM, 0, 8, 0, 0 )
				Fly("lisa3_cam04", CINEMATIC_NO_AIM, 0, 9, 0, 1 )
				StartCinematic()
	
				TActivate( "trLisa32" )
				TActivate( "trLisa3_cam022" )
				TActivate( "trLisa3_cam0212" )
				TActivate( "trLisa3_cam032" )
				TActivate( "trLisa3_cam042" )
				TActivate( "RolikEnd_Lisa32" )
				TActivate( "trMsg022" )
				TActivate( "trMsg032" )
				TActivate( "trMsg042" )
	
				trigger:Deactivate()  
			</script>
		</trigger>
	
		<trigger Name="trMsg022" active="0">
		<event msgid="1122" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
			<script>
				getObj("humLisa"):SetNodeAction(AT_STAND1)
				getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
	
				trigger:Deactivate()
			</script>
		</trigger>
	
		<trigger Name="trMsg032" active="0">
		<event msgid="1123" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
			<script>
				getObj("humLisa"):SetNodeAction(AT_STAND2)
				getObj("humPlayer"):SetNodeAction(AT_STAND1)
	
				trigger:Deactivate()
			</script>
		</trigger>
	
		<trigger Name="trMsg042" active="0">
		<event msgid="1124" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
			<script>
				getObj("humPlayer"):SetNodeAction(AT_RESERVED1)
				getObj("humLisa"):SetNodeAction(AT_STAND1)
	
				trigger:Deactivate()
			</script>
		</trigger>
	
		<trigger Name="trLisa3_cam022" active="0">
			<event timeout="0.01" eventid="GE_TIME_PERIOD" />
			<script>
				local vehLisa = GetEntityByName("vehLisa_0")
				local Plf = GetPlayerVehicle()
				Plf:PlaceToEndOfPath()
				vehLisa:PlaceToEndOfPath()
				
			AddCinematicMessage( 1122, 0.25 )
			AddCinematicMessage( 1123, 0.25 )
			AddCinematicMessage( 1124, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLisa3_cam0212" active="0">
		<event flypath="lisa3_cam021" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 1125, 0.25 )

			getObj("humPlayer"):SetNodeAction(AT_STAND1)
			getObj("humLisa"):SetNodeAction(AT_STAND2)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trLisa3_cam032" active="0">
		<event flypath="lisa3_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			PlayCustomMusic("Passage01unloop")

			local humLisa = GetEntityByName("humLisa")
			local humPlayer = GetEntityByName("humPlayer")

			if humPlayer then humPlayer:Remove() end
			if humLisa then humLisa:Remove() end

			local vehLisa = GetEntityByName("vehLisa_0")
			if vehLisa then
				vehLisa:SetGamePositionOnGround( CVector(3172.072, 320.401, 1203.629) )
				vehLisa:SetRotation(Quaternion(0.021, -0.999, -0.012, -0.032))
				vehLisa:SetCustomControlEnabled( true )
				vehLisa:SetExternalPathByName("lisa_path041")
				vehLisa:SetCustomControlEnabled( false )
				vehLisa:SetThrottle( 1 )
				vehLisa:SetCustomLinearVelocity( 10 )
			end

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trLisa3_cam042" active="0">
		<event flypath="lisa3_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 1126, 0.25 )

			PlayCustomMusic("QuietDialogue01")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Lisa32" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			TDeactivate( "trMsg01" )
			TDeactivate( "trMsg02" )
			TDeactivate( "trMsg03" )
			TDeactivate( "trMsg04" )
			TDeactivate( "trMsg05" )
			TDeactivate( "trLisa3" )
			TDeactivate( "trLisa3_cam02" )
			TDeactivate( "trLisa3_cam021" )
			TDeactivate( "trLisa3_cam03" )
			TDeactivate( "trLisa3_cam04" )
			TDeactivate( "trLisa_Out" )

			TActivate("METALFELIX")
			TActivate("LISAREMOVE2")

			local humLisa = GetEntityByName("humLisa")
			local humPlayer = GetEntityByName("humPlayer")

			if humPlayer then humPlayer:Remove() end
			if humLisa then humLisa:Remove() end

			local Plf = GetPlayerVehicle()
			Plf:PlaceToEndOfPath()

			StopPlayingCustomMusic()

			SetCameraBehindPlayerVehicle()


			trigger:Deactivate()
		</script>
	</trigger>




<!-- Felix1  -->
	<trigger Name="RolikBegin_Felix1" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)

			PlayCustomMusic("IntenseDialogue01")

			Fly("felix1_cam01", CINEMATIC_NO_AIM, 0, 21, 1, 0 )
			Fly("felix1_cam02", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
			Fly("felix1_cam03", CINEMATIC_NO_AIM, 0, 10, 0, 1 )
			StartCinematic()

			TActivate( "trFelix1" )
			TActivate( "trFelix1_cam02" )
			TActivate( "trFelix1_cam03" )
			TActivate( "trFelix1_Msg3" )
			TActivate( "RolikEnd_Felix1" )

			trigger:Deactivate()  
		</script>
	</trigger>

	<trigger Name="trFelix1" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			CinemaFiltersUse()

			local vehFelix0 = CreateVehicleEx("FelixVehicle","FelixVehicle01",( CVector(2004.950, 321.673, 2438.249) ), 1013)
			if vehFelix0 then
				vehFelix0:SetRotation(Quaternion(-0.003, -0.699, 0.012, 0.715))
				vehFelix0:SetSkin(4)
			end

			local vehFelix1 = CreateVehicleEx("Sml101","FelixGv01",( CVector(2022.755, 321.985, 2426.375) ), 1013)
			if vehFelix1 then
				vehFelix1:SetRotation(Quaternion(0.029, -0.597, -0.009, 0.801))
				vehFelix1:SetSkin(1)
			end

			CreateNewDummyObject( "dweller_felix", "felix01", -1, -1, CVector(2006.351, 321.215, 2434.379), Quaternion(0.000, -0.715, 0.000, 0.699), 1)

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetGamePositionOnGround( CVector(1915.916, 318.722, 2443.597) )
				Plf:SetRotation(Quaternion(-0.031, -0.826, -0.017, -0.562))
				Plf:SetCustomControlEnabled( true )
				Plf:SetExternalPathByName("player_path05")
				Plf:SetCustomControlEnabled( false )
				Plf:SetThrottle( 1 )
				Plf:SetCustomLinearVelocity( 10 )
			end

			getObj("felix01"):SetNodeAction(AT_RESERVED1)
			getObj("felix01"):SetNextForAnimation(AT_RESERVED1, AT_STAND2) 
			getObj("felix01"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 1131, 1 )

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trFelix1_cam02" active="0">
		<event flypath="felix1_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 1132, 0.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix1_cam03" active="0">
		<event flypath="felix1_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("felix01"):SetNodeAction(AT_RESERVED1)
			getObj("felix01"):SetNextForAnimation(AT_RESERVED1, AT_STAND2) 
			getObj("felix01"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 1133, 0.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix1_Msg3" active="0">
	<event msgid="1133" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			TActivate( "trFelix1_Out" )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix1_Out" active="0">
		<event timeout=" 6 " eventid="GE_TIME_PERIOD" />
		<script>
			local vehFelix1 = GetEntityByName("FelixGv01")
			if vehFelix1 then
				vehFelix1:SetExternalPathByName("felix_path01")
				vehFelix1:SetThrottle( 1 )
				vehFelix1:SetCustomLinearVelocity( 10 )
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Felix1" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			StopPlayingCustomMusic()

			RestoreAllToleranceStatus()

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then	vehPlayer:PlaceToEndOfPath()	end

			local humFelix = GetEntityByName("felix01")
			if humFelix then humFelix:Remove() end

			local vehFelix1 = GetEntityByName("FelixGv01")
			if vehFelix1 then	vehFelix1:Remove() end

			local vehFelix0 = GetEntityByName("FelixVehicle01")
			if vehFelix0 then vehFelix0:Remove() end

			TDeactivate( "RolikBegin_Felix1" )
			TDeactivate( "trFelix1_Msg3")
			TDeactivate( "trFelix1" )
			TDeactivate( "trFelix1_cam02" )
			TDeactivate( "trFelix1_cam03" )
			TDeactivate( "trFelix1_Out" )

			TeamCreate("FelixBanditCars",1013,CVector(2004.950, 315, 2438.249),{"FelixVehicle"})

			local FVehicle0 = GetEntityByName("FelixBanditCars_vehicle_0")
			if FVehicle0 then
				FVehicle0:SetSkin ( 4 )
				FVehicle0:setImmortalMode(1)
				FVehicle0:SetRotation(Quaternion(-0.003, -0.699, 0.012, 0.715))
				SetCameraDirectionToObj( FVehicle0:GetId() )
			end

			TeamCreate("FelixBanditCarsBand",1013,CVector(2022.755, 315, 2426.375),{"Sml101"})

			local FVehicle1 = GetEntityByName("FelixBanditCarsBand_vehicle_0")
			if FVehicle1 then
				FVehicle1:SetSkin ( 1 )
				FVehicle1:SetRotation(Quaternion(0.029, -0.597, -0.009, 0.801))
			end

			TActivate( "METALFELIXDIE1" )

			trigger:Deactivate()
		</script>
	</trigger>





<!-- ролик "мертвый отец" -->
	<trigger Name="RolikBegin_FatherDeath" active="0">
		<event timeout=" 0 " eventid="GE_TIME_PERIOD" />
		<script>
			CinemaFiltersUse()

			PlayCustomMusic("Death01")

			SaveAllToleranceStatus(RS_NEUTRAL)

			Fly("FatherDe_cam01", CINEMATIC_NO_AIM, 0, 4, 1, 0 )
			Fly("FatherDe_cam03", CINEMATIC_NO_AIM, 0, 15, 0, 0 )
			Fly("FatherDe_cam04", CINEMATIC_NO_AIM, 0, 13.5, 0, 0 )
			Fly("FatherDe_cam05", CINEMATIC_NO_AIM, 0, 12.5, 0, 1 )
			StartCinematic()

			TActivate( "trFatherDe_Fade" )
			TActivate( "trFatherDe_cam03" )
			TActivate( "trFatherDe_cam04" )
			TActivate( "trFatherDe_cam05" )
			TActivate( "RolikEnd_FatherDeath" )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFatherDe_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(3376.996, 365.777, 3254.298))
				vehPlayer:SetRotation(Quaternion(-0.042, -0.069, 0.029, 0.996))
				vehPlayer:SetCustomControlEnabled( true )       
				vehPlayer:SetExternalPathByName("player_path06")
				vehPlayer:SetThrottle( 0 )                      
				vehPlayer:SetCustomLinearVelocity( 0 )         
				vehPlayer:SetCustomControlEnabled( false )      
				vehPlayer:SetThrottle( 1 )                      
				vehPlayer:SetCustomLinearVelocity( 10 )         
			end

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trFatherDe_cam03" active="0">
		<event flypath="FatherDe_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			CreateNewDummyObject( "dweller_player", "Son", -1, -1, CVector(3354.277, 367.580, 3297.761), Quaternion(0.036, 0.083, 0.003, 0.996), 0)

			getObj("Son"):SetNodeAction(AT_RESERVED1)
			getObj("Son"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 

			AddCinematicMessage( 1141, 1 )
			AddCinematicMessage( 1142, 1 )  

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFatherDe_cam04" active="0">
		<event flypath="FatherDe_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("Son"):SetNodeAction(AT_STAND2)
			getObj("Son"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 1143,0.1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFatherDe_cam05" active="0">
		<event flypath="FatherDe_cam05" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("Son"):SetNodeAction(AT_RESERVED1)
			getObj("Son"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 

			AddCinematicMessage( 1144, 1 )

			PlayCustomMusic("Battle02")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_FatherDeath" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:PlaceToEndOfPath()
			end

			local humSon = GetEntityByName("Son")
			if humSon then
				humSon:Remove()
			end

			TDeactivate( "trFatherDe_Fade" )
			TDeactivate( "trFatherDe_cam03" )
			TDeactivate( "trFatherDe_cam04" )
			TDeactivate( "trFatherDe_cam05" )
			TDeactivate( "RolikBegin_FatherDeath" )

			TActivate("trStopMusic")

			SetCameraBehindPlayerVehicle()


			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trStopMusic" active="0">
		<event timeout=" 20 " eventid="GE_TIME_PERIOD" />
		<script>
			StopPlayingCustomMusic()

			trigger:Deactivate()
		</script>
	</trigger>





<!-- ролик "умерающий отец" -->
	<trigger Name="RolikBegin_Father" active="0">
		<event timeout=" 0 " eventid="GE_TIME_PERIOD" />
		<script>
			CinemaFiltersUse()

			PlayCustomMusic("Sadness1")

			SaveAllToleranceStatus(RS_NEUTRAL)

			Fly("FatherDe_cam01", CINEMATIC_NO_AIM, 0, 4, 1, 0 )
			Fly("Father_cam01", CINEMATIC_NO_AIM, 0, 10, 0, 0 )
			Fly("Father_cam02", CINEMATIC_NO_AIM, 0, 32, 0, 0 )
			Fly("Father_cam03", CINEMATIC_NO_AIM, 0, 12, 1, 0 )
			Fly("Father_cam04", CINEMATIC_NO_AIM, 0, 18, 0, 0 )
			Fly("Father_cam05", CINEMATIC_NO_AIM, 0, 12.5, 0, 0 )
			Fly("Father_cam06", CINEMATIC_NO_AIM, 0, 17, 0, 0 )
			Fly("Father_cam07", CINEMATIC_NO_AIM, 0, 17, 0, 1 )
			StartCinematic()

			TActivate( "trFather_Fade" )
			TActivate( "trFather_cam01" )
			TActivate( "trFather_cam02" )
			TActivate( "trFather_cam03" )
			TActivate( "trFather_cam04" )
			TActivate( "trFather_cam05" )
			TActivate( "trFather_cam06" )
			TActivate( "trFather_cam07" )
			TActivate( "RolikEnd_Father" )
			TActivate( "trFatherMsg" )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFather_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetGamePositionOnGround( CVector(3376.996, 365.777, 3254.298))
				vehPlayer:SetRotation(Quaternion(-0.042, -0.069, 0.029, 0.996))
				vehPlayer:SetCustomControlEnabled( true )       
				vehPlayer:SetExternalPathByName("player_path06")
				vehPlayer:SetThrottle( 0 )                      
				vehPlayer:SetCustomLinearVelocity( 0 )         
				vehPlayer:SetCustomControlEnabled( false )      
				vehPlayer:SetThrottle( 1 )                      
				vehPlayer:SetCustomLinearVelocity( 10 )         
			end

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trFather_cam01" active="0">
		<event flypath="Father_cam01" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			CreateNewDummyObject( "dweller_player", "Son", -1, -1, CVector(3355.524, 367.7, 3302.743), Quaternion( 0.030, -0.729, -0.005, 0.673), 0)
			CreateNewDummyObject( "dweller_father", "RolikFather", -1, -1, CVector(3354.268, 367.8, 3302.995), Quaternion( 0, 0, 0, 1), 0)

			getObj("Son"):SetNodeAction(AT_STAND1)
			getObj("RolikFather"):SetNodeAction(AT_RESERVED2)
			getObj("RolikFather"):SetNextForAnimation(AT_RESERVED2, -1) 

			AddCinematicMessage( 33330, 0.5 )
			AddCinematicMessage( 33331, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFatherMsg" active="0">
	<event msgid="33331" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("Son"):SetNodeAction(AT_MOVE2)
			getObj("Son"):SetNextForAnimation(AT_MOVE2, AT_MOVE2)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFather_cam02" active="0">
		<event flypath="Father_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 33332, 1 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFather_cam03" active="0">
		<event flypath="Father_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			PlayCustomMusic("Death01")

			AddCinematicMessage( 33333, 1.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFather_cam04" active="0">
		<event flypath="Father_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 33334, 1.5 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFather_cam05" active="0">
		<event flypath="Father_cam05" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 33335, 0.1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFather_cam06" active="0">
		<event flypath="Father_cam06" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 33336, 0.1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFather_cam07" active="0">
		<event flypath="Father_cam07" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("Son"):SetNodeAction(AT_RESERVED1)
			getObj("Son"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 

			AddCinematicMessage( 33337, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Father" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:PlaceToEndOfPath()
			end

			local humFather = GetEntityByName("RolikFather")
			if humFather then
				humFather:Remove()
			end

			local humSon = GetEntityByName("Son")
			if humSon then
				humSon:Remove()
			end

			TDeactivate( "trFather_Fade" )
			TDeactivate( "trFather_cam01" )
			TDeactivate( "trFather_cam02" )
			TDeactivate( "trFather_cam03" )
			TDeactivate( "trFather_cam04" )
			TDeactivate( "trFather_cam05" )
			TDeactivate( "trFather_cam06" )
			TDeactivate( "trFather_cam07" )
			TDeactivate( "RolikBegin_Father" )
			TDeactivate( "trFatherMsg" )

			StopPlayingCustomMusic()

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>





<!-- FelixBaza -->
	<trigger Name="RolikBegin_Felix2" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)

			PlayCustomMusic("IntenseDialogue01")

			local idn01 = GetPlayerVehicleId()
			FlyLinked( "felix2_cam01", idn01, 5, 1, 0, idn01 )
			Fly("felix2_cam02", CINEMATIC_NO_AIM, 0, 7, 0, 1 )
			StartCinematic()

			TActivate( "trFelix2_Fade" )
			TActivate( "trFelix2_cam02" )
			TActivate( "trFelix2" )
			TActivate( "RolikEnd_Felix2" )

			trigger:Deactivate()  
		</script>
	</trigger>

	<trigger Name="trFelix2_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetCustomControlEnabled( true )
				Plf:SetGamePositionOnGround( CVector(528.506, 303.338, 1774.004) )
				Plf:SetRotation(Quaternion(-0.012, -0.139, 0.005, 0.990))
				Plf:SetCustomControlEnabled( false )
				Plf:SetThrottle( 1 )
				Plf:SetCustomLinearVelocity( 10 )
			end

			AddCinematicMessage( 1151, 1 )

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trFelix2" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			CinemaFiltersUse()

			CreateNewDummyObject( "dweller_felix", "felix01", -1, -1, CVector(479.414, 305.863, 1801.109), Quaternion(0.031, 0.925, 0.003, 0.379), 1)

			local vehFelix0 = CreateVehicleEx("FelixVehicle","FelixVehicle01",( CVector(477.554, 306.603, 1799.010) ), 1013)
			if vehFelix0 then
				vehFelix0:SetRotation(Quaternion(0.031, 0.925, 0.003, 0.379))
				vehFelix0:SetSkin(4)
			end

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trFelix2_cam02" active="0">
		<event flypath="felix2_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("felix01"):SetNodeAction(AT_RESERVED2)
			getObj("felix01"):SetNextForAnimation(AT_RESERVED2, AT_STAND1) 

			AddCinematicMessage( 1152, 0.25 )

			local Plf = GetPlayerVehicle()
			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Felix2" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			StopPlayingCustomMusic()

			local vehFelix0 = GetEntityByName("FelixVehicle01")
			if vehFelix0 then
				vehFelix0:Remove()
			end

			local humFelix = GetEntityByName("felix01")
			if humFelix then
				humFelix:Remove()
			end

			TDeactivate( "trFelix2_Fade" )
			TDeactivate( "RolikBegin_Felix2" )
			TDeactivate( "trFelix2" )
			TDeactivate( "trFelix2_cam02" )

			TeamCreate("FelixBanditCars2",1013,CVector(493.000, 303.000, 1883.000),{"Sml201","Sml301"})

			TActivate( "METALFELIXDIE2" )

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>






<!-- ѕобеда на базе над ублюдками ‘еликса  -->
	<trigger Name="RolikBegin_Felix3" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			CinemaFiltersUse()

			PlayCustomMusic("Passage03")

			SaveAllToleranceStatus(RS_NEUTRAL)

			local vehFelix = CreateVehicleEx("FelixVehicle","FelixVehicle01",( CVector(454.555, 305.278, 1954.817) ))
			if vehFelix then
				vehFelix:SetRotation(Quaternion(-0.045, -0.955, 0.066, -0.286))
				vehFelix:SetSkin(4)
			end

			local FLID = vehFelix:GetId()
			local Plf = GetPlayerVehicle()
			local PlfID = GetPlayerVehicleId()
			local PlfCoor = Plf:GetPosition()
			PlfCoor.y = PlfCoor.y + 10
			PlfCoor.z = PlfCoor.z + 20

			FlyAround( 1, 0, 25, 6, PlfCoor, PlfID, 1, 0 )
			FlyLinked( "felix3_cam01", FLID, 12, 0, 1, PlfID )
			StartCinematic()

			if Plf then
				Plf:SetThrottle( 0 )
				Plf:SetCustomLinearVelocity( 0 )
			end

			TActivate( "trFelix3_cam01" )
			TActivate( "trFelix3" )
			TActivate( "RolikEnd_Felix3" )

			AddCinematicMessage( 1153, 0.25 )

			trigger:Deactivate()  
		</script>
	</trigger>

	<trigger Name="trFelix3_cam01" active="0">
		<event flypath="felix3_cam01" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage( 11540, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix3" active="0">
		<event msgid="11541" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			local vehFelix = GetEntityByName("FelixVehicle01")
			if vehFelix then
				vehFelix:SetThrottle( 2 )
				vehFelix:SetCustomLinearVelocity( 30 )
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Felix3" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()

			local vehFelix = GetEntityByName("FelixVehicle01")
			if vehFelix then
				vehFelix:Remove()
			end

			TeamCreate("FelixBanditCars3",1013,CVector(493.000, 303.000, 1883.000),{"FelixVehicle"})
			local FVehicle0 = GetEntityByName("FelixBanditCars3_vehicle_0")
			if FVehicle0 then
				FVehicle0:SetSkin ( 4 )
				FVehicle0:setImmortalMode(1)
			end

			TDeactivate( "RolikBegin_Felix3" )
			TDeactivate( "trFelix3" )
			TDeactivate( "trFelix2_cam03" )

			TActivate( "METALFELIXDIE3" )

			SetCameraBehindPlayerVehicle()

			trigger:Deactivate()
		</script>
	</trigger>





<!-- ѕобеда над ‘еликсом -->
	<trigger Name="RolikBegin_Felix4" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			CinemaFiltersUse()

			PlayCustomMusic("IntenseDialogue03")

			SaveAllToleranceStatus(RS_NEUTRAL)

			Fly("Felix4_cam01", CINEMATIC_NO_AIM, 0, 6, 1, 0 )
			Fly("Felix4_cam02", CINEMATIC_NO_AIM, 0, 11, 0, 0 )
			Fly("Felix4_cam03", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
			Fly("Felix4_cam04", CINEMATIC_NO_AIM, 0, 9, 0, 0 )
			Fly("Felix4_cam05", CINEMATIC_NO_AIM, 0, 2, 0, 0 )
			Fly("Felix4_cam06", CINEMATIC_NO_AIM, 0, 8, 0, 0 )
			Fly("Felix4_cam07", CINEMATIC_NO_AIM, 0, 3, 0, 0 )
			Fly("Felix4_cam08", CINEMATIC_NO_AIM, 0, 7, 0, 0 )
			Fly("Felix4_cam09", CINEMATIC_NO_AIM, 0, 18, 0, 0 )
			Fly("Felix4_cam10", CINEMATIC_NO_AIM, 0, 6, 0, 1 )
			StartCinematic()

			TActivate( "trFelix4_Fade" )
			TActivate( "trFelix4_cam02" )
			TActivate( "trFelix4_cam03" )
			TActivate( "trFelix4_cam04" )
			TActivate( "trFelix4_cam05" )
			TActivate( "trFelix4_cam06" )
			TActivate( "trFelix4_cam07" )
			TActivate( "trFelix4_cam08" )
			TActivate( "trFelix4_cam09" )
			TActivate( "trFelix4_cam10" )
			TActivate( "RolikEnd_Felix4" )

			trigger:Deactivate()  
		</script>
	</trigger>

	<trigger Name="trFelix4_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetGamePositionOnGround( CVector(465.379, 306.774, 1819.744))
				vehPlayer:SetRotation(Quaternion(0.030, 0.949, 0.000, 0.315))
			end

			local humFelix = CreateNewDummyObject( "dweller_felix", "RolikFelix", -1, -1, CVector(459.350, 306.222, 1817.796), Quaternion( 0.000, 0.468, 0.000, 0.884 ), 1)
			local humPlayer = CreateNewDummyObject( "dweller_player", "RolikSon", -1, -1, CVector(462.265, 306.218, 1818.668), Quaternion( 0.000, -0.806, 0.000, 0.591 ), 0)

			getObj("RolikSon"):SetNodeAction(AT_RESERVED1)
			getObj("RolikSon"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 

			AddCinematicMessage( 1155, 2 )

			trigger:Deactivate()    
		</script>
	</trigger>

	<trigger Name="trFelix4_cam02" active="0">
		<event flypath="Felix4_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("RolikFelix"):SetNodeAction(AT_RESERVED1)
			getObj("RolikFelix"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 
			getObj("RolikSon"):SetNodeAction(AT_STAND2)
			getObj("RolikSon"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 1156, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix4_cam03" active="0">
		<event flypath="Felix4_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("RolikSon"):SetNodeAction(AT_RESERVED1)
			getObj("RolikSon"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 
			getObj("RolikFelix"):SetNodeAction(AT_STAND2)
			getObj("RolikFelix"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 1157, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix4_cam04" active="0">
		<event flypath="Felix4_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("RolikFelix"):SetNodeAction(AT_RESERVED1)
			getObj("RolikFelix"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 
			getObj("RolikSon"):SetNodeAction(AT_STAND2)
			getObj("RolikSon"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 1158, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix4_cam05" active="0">
		<event flypath="Felix4_cam05" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("RolikSon"):SetNodeAction(AT_RESERVED1)
			getObj("RolikSon"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 
			getObj("RolikFelix"):SetNodeAction(AT_STAND2)
			getObj("RolikFelix"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 1159, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix4_cam06" active="0">
		<event flypath="Felix4_cam06" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("RolikFelix"):SetNodeAction(AT_RESERVED2)
			getObj("RolikFelix"):SetNextForAnimation(AT_RESERVED2, AT_STAND1) 
			getObj("RolikSon"):SetNodeAction(AT_STAND2)
			getObj("RolikSon"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 11510, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix4_cam07" active="0">
		<event flypath="Felix4_cam07" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("RolikSon"):SetNodeAction(AT_RESERVED1)
			getObj("RolikSon"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 
			getObj("RolikFelix"):SetNodeAction(AT_STAND2)
			getObj("RolikFelix"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 11511, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix4_cam08" active="0">
		<event flypath="Felix4_cam08" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("RolikFelix"):SetNodeAction(AT_RESERVED1)
			getObj("RolikFelix"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 
			getObj("RolikSon"):SetNodeAction(AT_STAND2)
			getObj("RolikSon"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 11512, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix4_cam09" active="0">
		<event flypath="Felix4_cam09" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			getObj("RolikSon"):SetNodeAction(AT_RESERVED1)
			getObj("RolikSon"):SetNextForAnimation(AT_RESERVED1, AT_STAND1) 
			getObj("RolikFelix"):SetNodeAction(AT_STAND2)
			getObj("RolikFelix"):SetNextForAnimation(AT_STAND2, AT_STAND1) 

			AddCinematicMessage( 11513, 0.25 )

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix4_cam10" active="0">
		<event flypath="Felix4_cam10" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			TeamCreate("BrodCarCin",1002,CVector(493.000, 303.000, 1883.000),{"FighterBrod"})
			getObj("BrodCarCin_vehicle_0"):SetGamePositionOnGround(CVector(539.901, 304.476, 1681.382))
			getObj("BrodCarCin_vehicle_0"):SetRotation(Quaternion(0.004, -0.234, 0.043, 0.971))
			AddCinematicMessage( 11514, 0.25 )
			AddCinematicMessage( 11515, 0.25 )

			TActivate("trFelix4_cam11")

			if humSon then
				humSon:Remove()
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="trFelix4_cam11" active="0">
		<event msgid="11515" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			getObj("BrodCarCin_vehicle_0"):SetExternalPathByName("BrodAttack_path1")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RolikEnd_Felix4" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GameFiltersUse()

			RestoreAllToleranceStatus()
			SetTolerance("1013","1002",RS_ENEMY)
			SetTolerance("1013","1100",RS_ALLY)
			TeamCreate("FelixBanditCars3",1013,CVector(493.000, 303.000, 1883.000),{"FelixVehicle"})
			GetPlayerVehicle():SetGamePositionOnGround(CVector(496.000, 303.000, 1887.000))
			local FVehicle0 = GetEntityByName("FelixBanditCars3_vehicle_0")
			if FVehicle0 then
				FVehicle0:SetSkin ( 4 )
				FVehicle0:setImmortalMode(1)
			end
			TeamCreate("BrodCar",1002,CVector(539.901, 304.476, 1681.382),{"FighterBrod"})
			getObj("BrodCar_vehicle_0"):SetGamePositionOnGround(CVector(509.052, 303.876, 1815.185))
			getObj("BrodCar_vehicle_0"):SetRotation(Quaternion(0.004, -0.234, 0.043, 0.971))
			getObj("BrodCar_vehicle_0"):setImmortalMode(1)
			getObj("BrodCar_vehicle_0"):AddModifier("MaxHP","= 250")
			TActivate("BrodNoHP")
			TActivate("BrodAndPlayerDist")
			local vehPlayer = GetPlayerVehicle()
			local humFelix = GetEntityByName("RolikFelix")
			local humSon = GetEntityByName("RolikSon")

			if getObj("BrodCarCin") then
			getObj("BrodCarCin"):Remove()
			end

			if humFelix then
				humFelix:Remove()
			end
			if humSon then
				humSon:Remove()
			end

			StopPlayingCustomMusic()

			GetPlayerVehicle():AddModifier("hp","+ 250")

			TDeactivate( "trFelix4_Fade" )
			TDeactivate( "trFelix4_cam01" )
			TDeactivate( "trFelix4_cam02" )
			TDeactivate( "trFelix4_cam03" )
			TDeactivate( "trFelix4_cam04" )
			TDeactivate( "trFelix4_cam05" )
			TDeactivate( "trFelix4_cam06" )
			TDeactivate( "trFelix4_cam07" )
			TDeactivate( "trFelix4_cam11" )
			TDeactivate( "RolikBegin_Felix4" )

			SetCameraBehindPlayerVehicle()


			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Upgrade New CinTriggers -->

<trigger Name="RolikRandomQuest1_1" active="0">
	<event 	timeout="1" eventid="GE_TIME_PERIOD" />
	<script>
		CinemaFiltersUse()

		SaveAllToleranceStatus(RS_NEUTRAL)

		PlayCustomMusic("Bio05")

		Fly("camUp_randomquest1_1", CINEMATIC_NO_AIM, 0, 10, 1, 0 )
		Fly("camUp_randomquest1_2", CINEMATIC_NO_AIM, 0, 5, 0, 1 )
		StartCinematic()

		TActivate("RolikRandomQuest1_2")
		TActivate("RolikRandomQuest1_3")
		TActivate("RolikRandomQuest1End")

		trigger:Deactivate()    
	</script>
</trigger>

<trigger Name="RolikRandomQuest1_2"	active="0">
	<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
	<script>
		GetPlayerVehicle():SetCustomLinearVelocity(0)
		GetPlayerVehicle():SetThrottle(0)
		GetPlayerVehicle():SetGamePositionOnGround( CVector(999.934, 316.719, 871.751))
		GetPlayerVehicle():SetRotation(Quaternion(0.062, -0.921, -0.012, 0.385))
		GetPlayerVehicle():SetExternalPathByName("PlUp_path1")
		GetPlayerVehicle():LimitMaxSpeed("10")
		CreateNewDummyObject( "dweller_felix", "RQMan1", -1, -1, CVector(916.785, 309.112, 869.860), Quaternion(0.052, -0.913, -0.028, -0.404), 1)
		AddCinematicMessage(10000, 1)
		trigger:Deactivate()    
	</script>
</trigger>

<trigger Name="RolikRandomQuest1_3" active="0">
	<event flypath="camUp_randomquest1_2" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
	<script>
		AddCinematicMessage( 10001, 0.25 )
		AddCinematicMessage( 10002, 0.25 )
		trigger:Deactivate()
	</script>
</trigger>

<trigger Name="RolikRandomQuest1End" active="0">
	<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
	<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
	<script>
		if GetPlayerMoney() >= 15000 and not(IsQuestComplete("TalkWithFather_Quest")) then
		AddPlayerMoney(-3999999)
		AddPlayerMoney(200)
		end
		GameFiltersUse()
		RestoreAllToleranceStatus()
		getObj("RQMan1"):Remove()

		TDeactivate("RolikRandomQuest1")
		TDeactivate("RolikRandomQuest2")
		TDeactivate("RolikRandomQuest3")

		GetPlayerVehicle():UnlimitMaxSpeed()
		GetPlayerVehicle():PlaceToEndOfPath()

		local b = SpawnMessageBox( "90005" )
		if b == 1 then
		TakeQuest("Quest_vaga1")
		end

		StopPlayingCustomMusic()
		trigger:Deactivate()
	</script>
</trigger>

<trigger Name="RolikRandomQuest2_1" active="0">
	<event 	timeout="1" eventid="GE_TIME_PERIOD" />
	<script>
		CinemaFiltersUse()

		SaveAllToleranceStatus(RS_NEUTRAL)

		PlayCustomMusic("intensedialogue02")

		Fly("camUp_randomquest2_1", CINEMATIC_NO_AIM, 0, 15, 1, 1 )
		StartCinematic()

		TActivate("RolikRandomQuest2_2")
		TActivate("RolikRandomQuest2_3")
		TActivate("RolikRandomQuest2End")

		trigger:Deactivate()    
	</script>
</trigger>

<trigger Name="RolikRandomQuest2_2"	active="0">
	<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
	<script>
		GetPlayerVehicle():SetCustomLinearVelocity(0)
		GetPlayerVehicle():SetThrottle(0)
		GetPlayerVehicle():SetGamePositionOnGround( CVector(1848.166, 324.071, 1803.582))
		GetPlayerVehicle():SetRotation(Quaternion(-0.071, -0.988, -0.111, -0.082))

		TeamCreate("Allys",1008,CVector(1894.943, 320.562, 1720.053),{"Scout02"},nil, 1)
		TeamCreate("Enemys",1002,CVector(1888.662, 320.653, 1735.998),{"Sml301","Sml301"},nil, 1)

		getObj("Allys_vehicle_0"):SetGamePositionOnGround( CVector(1896.186, 320.548, 1714.969))
		getObj("Allys_vehicle_0"):SetRotation(Quaternion(0.005, 0.100, -0.011, -0.995))
		getObj("Enemys_vehicle_0"):SetGamePositionOnGround( CVector(1888.662, 320.653, 1735.998))
		getObj("Enemys_vehicle_0"):SetRotation(Quaternion(0.013, -0.993, 0.006, -0.119))
		getObj("Enemys_vehicle_1"):SetGamePositionOnGround( CVector(1899.077, 320.713, 1727.967))
		getObj("Enemys_vehicle_1"):SetRotation(Quaternion(0.001, -1.000, 0.000, -0.029))

		AddCinematicMessage(10003, 0.1)
		AddCinematicMessage(10004, 0.1)
		AddCinematicMessage(10005, 0.1)
		AddCinematicMessage(10006, 0.1)
		trigger:Deactivate()    
	</script>
</trigger>

<trigger Name="RolikRandomQuest2End" active="0">
	<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
	<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
	<script>
		GameFiltersUse()
		RestoreAllToleranceStatus()
		getObj("RQMan1"):Remove()

		if GetTolerance("1100","1002",RS_ALLY) then
		SetTolerance("1002","1100",RS_ENEMY)
		end
		if GetTolerance("1100","1005",RS_ALLY) then
		SetTolerance("1005","1100",RS_ENEMY)
		end

		TActivate("EnemysDie")
		TActivate("AllyDie")
		TDeactivate("RolikRandomQuest2_1")
		TDeactivate("RolikRandomQuest2_2")

		StopPlayingCustomMusic()
		SpawnMessageBox( "90002" )
		trigger:Deactivate()
	</script>
</trigger>


<trigger Name="GoodEndCin" active="0">
	<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
	<script>
		SaveAllToleranceStatus(RS_NEUTRAL)
		
		PlayCustomMusic("QuietDialogue05")
		
		Fly("Narrators", CINEMATIC_NO_AIM, 0, 8, 1, 1 )
		StartCinematic()

		TActivate("GoodEndFade")
		TActivate("GoodEndEnd")
		TActivate("StartGame")
		TActivate("ZASADA_1")
		TActivate("ZASADA_2")
		TActivate("ZASADA_3")
		trigger:Deactivate()
	</script>
</trigger>

<trigger Name="GoodEndFade" active="0">
	<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
	<script>
		SetGameTime( 9, 0 )
		
		SetWeather(0)
		local Plf = GetPlayerVehicle()
		Plf:SetCustomLinearVelocity( 0 )
		Plf:SetThrottle( 0 )
		AddCinematicMessage( 100000, 3 )
		AddCinematicMessage( 100001, 0.1 )
		AddCinematicMessage( 100002, 0.1 )
		trigger:Deactivate()
	</script>
</trigger>

<trigger Name="GoodEndEnd" active="0">
	<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
	<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
	<script>
		RestoreAllToleranceStatus()
		TActivate("loc_lisa")
		TActivate("TriggerQuestion1")
		TActivate("TriggerQuestion2")
		
		trigger:Deactivate()
	</script>
</trigger>

<trigger Name="RolikBrodAndPlayer" active="0">
	<event timeout="0.01" eventid="GE_TIME_PERIOD" />
	<script>
		CinemaFiltersUse()

		PlayCustomMusic("Battle01")

		local Plf = GetPlayerVehicle()
		Plf:SetCustomControlEnabled( true )
		Plf:SetCustomLinearVelocity( 0 )
		Plf:SetThrottle( 0 )
		Plf:SetCustomControlEnabled( false )

		getObj("BrodCar_vehicle_0"):Remove()

		CreateVehicleEx("FighterBrod","BrodCarC",CVector(2888.161, 346.333, 2342.007), 1002)
		getObj("BrodCarC"):setImmortalMode(1)

		local vehBrod = GetEntityByName("BrodCarC")
		local vehBrodID = vehBrod:GetId()
		local idn01 = GetPlayerVehicleId()

		FlyLinked( "PlayerAndBrodyaga_cam01", idn01, 7, 1, 0, vehBrodID )
		FlyLinked( "PlayerAndBrodyaga_cam02", vehBrodID, 10, 0, 1, idn01 )
		
		StartCinematic()
		TActivate( "RolikBrodAndPlayer1" )
		TActivate( "RolikBrodAndPlayer2" )
		TActivate( "RolikBrodAndPlayerCam2" )
		TActivate( "RolikBrodAndPlayerFire" )
		TActivate( "RolikBrodAndPlayerEnd" )

		trigger:Deactivate()  
	</script>
</trigger>

<trigger Name="RolikBrodAndPlayer1" active="0">
	<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
	<script>
		local vehPlayer = GetPlayerVehicle()
		if vehPlayer then
			vehPlayer:SetThrottle( 0 )
			vehPlayer:SetCustomLinearVelocity( 0 )
			vehPlayer:SetGamePositionOnGround( CVector(529.506, 303.717, 1689.215))
			vehPlayer:SetRotation(Quaternion(0.004, -0.919, -0.009, -0.394))
			vehPlayer:SetExternalPathByName("PlUp_path2")
			vehPlayer:setGodMode(1)
		end

		getObj("BrodCarC"):SetGamePositionOnGround( CVector(550.942, 304.985, 1673.070))
		getObj("BrodCarC"):SetRotation(Quaternion(0.057, -0.949, 0.011, -0.310))
		getObj("BrodCarC"):SetExternalPathByName("Brod_path1")

		AddCinematicMessage( 11516, 2 )

		trigger:Deactivate()    
	</script>
</trigger>

<trigger Name="RolikBrodAndPlayerFire" active="0">
	<event 	timeout="1" eventid="GE_TIME_PERIOD" />
	<script>
		local vehPlayer = GetPlayerVehicle()

		local vehBrod = GetEntityByName("BrodCarC")

		if vehBrod then
			vehBrod:SetCustomControlEnabled(1)
			vehBrod:SetCustomControlWeapons(2)
			vehBrod:SetCustomControlWeaponsTargetObj(vehBrod:GetId())
			vehBrod:FireFromWeaponCustom2(1, vehBrod:GetId())
			vehPlayer:SetCustomControlEnabled(1)
			vehPlayer:SetCustomControlWeapons(2)
			vehPlayer:SetCustomControlWeaponsTargetObj(vehBrod:GetId())
			vehPlayer:FireFromWeaponCustom2(1, vehBrod:GetId())
		end

	</script>
</trigger>

<trigger Name="RolikBrodAndPlayer2" active="0">
	<event flypath="PlayerAndBrodyaga_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
	<script>
		AddCinematicMessage( 11517, 3 )

		trigger:Deactivate()
	</script>
</trigger>

<trigger Name="RolikRandomQuest1_3" active="0">
	<event flypath="camUp_randomquest1_2" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
	<script>
		AddCinematicMessage( 10001, 0.25 )
		AddCinematicMessage( 10002, 0.25 )
		trigger:Deactivate()
	</script>
</trigger>

<trigger Name="RolikBrodAndPlayerEnd" active="0">
	<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
	<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
	<script>
		CompleteQuest("d_ArriveToFelix_Quest")
		GameFiltersUse()
		GetPlayerVehicle():SetCustomControlEnabled(0)
		GetPlayerVehicle():SetCustomControlWeapons(0)
		RestoreAllToleranceStatus()
		SetTolerance("1013","1002",RS_ALLY)
		SetTolerance("1013","1100",RS_ENEMY)
		local FVehicle0 = GetEntityByName("FelixBanditCars3_vehicle_0")
		if FVehicle0 then
			FVehicle0:Remove()
		end

		if getObj("BrodCarC") then
		getObj("BrodCarC"):Remove()
		end

		StopPlayingCustomMusic()
		
		TDeactivate( "RolikBrodAndPlayer1" )
		TDeactivate( "RolikBrodAndPlayerFire" )
		TDeactivate( "RolikBrodAndPlayer2" )

		SetCameraBehindPlayerVehicle()

		GetPlayerVehicle():PlaceToEndOfPath()
		GetPlayerVehicle():setGodMode(0)

		trigger:Deactivate()
	</script>
</trigger>
	
</triggers>